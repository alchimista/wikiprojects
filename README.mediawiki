''Scripts related to tracking participation on the Portuguese Wikipedia [http://pt.wikipedia.org/wiki/WP:WikiProjeto WikiProjects], groups of Wikipedia editors who work together.''

== Wikitools patches ==

Right now, you have to patch your copy of Wikitools a bit to get some of this to work. In future, we should just make a class, but for now...

* ''wikitools/wiki.py.setSiteInfo: '' apply [http://code.google.com/p/python-wikitools/issues/detail?id=40 this patch] to line 109.

* ''wikitools/page.py.edit:'' add 'sectiontitle' to the list of valid args.


== Create table syntax ==

=== invited_medicina ===
This table provides a log of the users who have been invited to the Project. You populate the majority of the metadata with a query like [https://github.com/jtmorgan/wikiprojects/blob/master/pt_wikipedia/findNewEditors.py#L64 this one].

 +-------------------+------------------+------+-----+---------+----------------+
 | Field             | Type             | Null | Key | Default | Extra          |
 +-------------------+------------------+------+-----+---------+----------------+
 | id                | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
 | user_id           | int(11)          | YES  | UNI | NULL    |                |
 | user_name         | varbinary(200)   | YES  |     | NULL    |                |
 | user_registration | varbinary(14)    | YES  |     | NULL    |                |
 | user_editcount    | int(11)          | YES  |     | NULL    |                |
 | sample_date       | datetime         | YES  |     | NULL    |                |
 | invited           | tinyint(1)       | YES  |     | 0       |                |
 | bot_invited       | tinyint(1)       | YES  |     | 0       |                |
 | bot_skipped       | tinyint(1)       | YES  |     | 0       |                |
 | user_talkpage     | int(11)          | YES  |     | NULL    |                |
 | ut_is_redirect    | tinyint(1)       | YES  |     | 0       |                |
 +-------------------+------------------+------+-----+---------+----------------+

The script that [https://github.com/jtmorgan/wikiprojects/blob/master/pt_wikipedia/inviteNewEditors.py invites these users] to your project then updates the <code>invited, bot_invited</code> and <code>bot_skipped</code> columns.

;Create table:
<nowiki>CREATE TABLE `invited_medicina` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `user_name` varbinary(200) DEFAULT NULL,
  `user_registration` varbinary(14) DEFAULT NULL,
  `user_editcount` int(11) DEFAULT NULL,
  `sample_date` datetime DEFAULT NULL,
  `invited` tinyint(1) DEFAULT '0',
  `bot_invited` tinyint(1) DEFAULT '0',
  `bot_skipped` tinyint(1) DEFAULT '0',
  `user_talkpage` int(11) DEFAULT NULL,
  `ut_is_redirect` tinyint(1) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `user_id` (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=362 DEFAULT CHARSET=latin1;
</nowiki>

== Output of findNewEditors.py ==

The output markup of the invitee report should look like this:

 ==Daily Report==

 ===Active new editors===

Below is a list of editors who registered within the last 24 hours, have since made more than 2 edits, and were not blocked at the time the report was generated.
 
 {| class="wikitable sortable plainlinks"
 |-
 ! Editor #
 ! User name
 ! Edit count
 ! Contribs
 ! Already invited?
 |-
 | 299
 | [[User_talk:Ironaxus|Ironaxus]]
 | 2
 | [[Special:Contributions/Ironaxus|contribs]]
 | 0
 |-
 | 300
 | [[User_talk:Daniel Steinman|Daniel Steinman]]
 | 12
 | [[Special:Contributions/Daniel Steinman|contribs]]
 | 0
 |-
 | 301
 | [[User_talk:Rickibraga|Rickibraga]]
 | 2
 | [[Special:Contributions/Rickibraga|contribs]]
 | 0
 |-
 | 302
 | [[User_talk:Rodrigocswm|Rodrigocswm]]
 | 2
 | [[Special:Contributions/Rodrigocswm|contribs]]
 | 0
 |-
 | 303
 | [[User_talk:TeofilHistoricul13|TeofilHistoricul13]]
 | 2
 | [[Special:Contributions/TeofilHistoricul13|contribs]]
 | 0
 |-
 | 304
 | [[User_talk:Manuel Quaresma de M. Júnior|Manuel Quaresma de M. Júnior]]
 | 13
 | [[Special:Contributions/Manuel Quaresma de M. Júnior|contribs]]
 | 0
 |-
 |}

A similar (live) report can be viewed at [http://en.wikipedia.org/wiki/Wikipedia:Teahouse/Hosts/Database_reports http://en.wikipedia.org/wiki/Wikipedia:Teahouse/Hosts/Database_reports]
